{% load static %}
<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <title>Weather App</title>
  <link rel="stylesheet" href="{% static 'weatherapp/style.css' %}">
</head>
<body>
  <div class="container">
    <h1>Weather App</h1>

    <form method="post" id="city-form">
      {% csrf_token %}
      <input type="text" name="city" id="city" placeholder="Enter city (e.g., Manila)" value="{{ city }}">
      <button type="submit">Get Weather</button>
    </form>

    {% if error %}
      <div class="error">{{ error }}</div>
    {% endif %}

    {% if weather %}
      <div class="result">
        <h2>{{ weather.city }}</h2>
        <div class="meta">
          {% if weather.icon %}
            <img src="https://openweathermap.org/img/wn/{{ weather.icon }}@2x.png" alt="icon">
          {% endif %}
          <p class="desc">{{ weather.description }}</p>
          <p class="temp">{{ weather.temp }} °C (Feels like {{ weather.feels_like }} °C)</p>
        </div>
      </div>
    {% endif %}

    {% if recent %}
      <div class="recent">
        <h3>Recent searches</h3>
        <ul>
          {% for s in recent %}
            <li>{{ s.city }} — {{ s.created_at }}</li>
          {% endfor %}
        </ul>
      </div>
    {% endif %}
  </div>

  <script src="{% static 'weatherapp/app.js' %}"></script>
</body>
</html>
